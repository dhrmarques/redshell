<%= form_for(@task) do |f| %>
  <% if @task.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@task.errors.count, "erro") %> impediram esta tarefa de ser criada:</h2>

      <ul>
      <% @task.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


  <div class="field">
    <%= f.label :task_domain, TaskDomain.label %><br>
    <% tdom_id = @task.task_type_id.nil? ? nil : @task.task_type.task_domain_id %>
    <%= select_tag(:task_domain_id, options_for_select(@task_domains.collect { |tdom| [tdom.title, tdom.id] }, tdom_id), prompt: "Escolha um #{TaskDomain.label.downcase}")%>
  </div>
  <div class="field">
    <%= f.label :task_type, TaskType.label %><br>
    <%= f.select(:task_type_id, options_for_select(@task_types.collect { |ttyp| [ttyp.title, ttyp.id] }, @task.task_type_id), prompt: "Escolha um #{TaskType.label.downcase}")%>
  </div>
  <div class="field">
    <%= f.label :employee_id, Employee.label %><br>
    <%= f.select(:employee_id, options_for_select(@employees.collect { |emp| [emp.fullname, emp.id] }, @task.employee_id), prompt: "Escolha um #{Employee.label.downcase}")%>
  </div>
  <div class="field">
    <%= f.label :after, Task.label(:after) %><br>
    <%= f.datetime_select :after %>
  </div>
  <div class="field">
    <%= f.label :before, Task.label(:before) %><br>
    <%= f.datetime_select :before %>
  </div>
  <div class="field">
    <%= f.label :checkin_start, Task.label(:checkin_start) %><br>
    <%= f.datetime_select :checkin_start %>
  </div>
  <div class="field">
    <%= f.label :checkin_finish, Task.label(:checkin_finish) %><br>
    <%= f.datetime_select :checkin_finish %>
  </div>
  <div class="field">
    <%= f.label :details, Task.label(:details) %><br>
    <%= f.text_area :details %>
  </div>
  <div class="actions">
    <%= f.submit "Criar #{Task.label}", class: 'btn btn-success' %>
  </div>
<% end %>
